<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="bMC_ou8kAR1whQgISf5rsn3Zv1CWT6cl-rvmnri4Fho" />










  
  
    
  
  <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css" rel="stylesheet" type="text/css" />







  

<link href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="工具," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="上一篇博客中介绍了如何安装部署Phabricator，本以为安装完成之后就可以愉快的使用了，但是没想到只是完成了一半，打算迁徙几个代码库进来试试，结果又踩了不少坑">
<meta property="og:type" content="article">
<meta property="og:title" content="Phabricator仓库配置">
<meta property="og:url" content="http://zxh.site/2016/12/01/phabricator-2/index.html">
<meta property="og:site_name" content="Ansiz">
<meta property="og:description" content="上一篇博客中介绍了如何安装部署Phabricator，本以为安装完成之后就可以愉快的使用了，但是没想到只是完成了一半，打算迁徙几个代码库进来试试，结果又踩了不少坑">
<meta property="og:image" content="http://o6sdpimwf.bkt.clouddn.com/uploads/2016/11/hero.png">
<meta property="og:updated_time" content="2016-12-01T15:56:07.722Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Phabricator仓库配置">
<meta name="twitter:description" content="上一篇博客中介绍了如何安装部署Phabricator，本以为安装完成之后就可以愉快的使用了，但是没想到只是完成了一半，打算迁徙几个代码库进来试试，结果又踩了不少坑">
<meta name="twitter:image" content="http://o6sdpimwf.bkt.clouddn.com/uploads/2016/11/hero.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Phabricator仓库配置 | Ansiz </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Ansiz</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">迎风向前是唯一的方法</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Phabricator仓库配置
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-12-01T22:19:17+08:00" content="2016-12-01">
              2016-12-01
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/工具/" itemprop="url" rel="index">
                    <span itemprop="name">工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/12/01/phabricator-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/01/phabricator-2/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://o6sdpimwf.bkt.clouddn.com/uploads/2016/11/hero.png" alt="CLI"><br><a href="http://blog.zxh.site/2016/11/26/phabricator-configure/#more" target="_blank" rel="external">上一篇博客</a>中介绍了如何安装部署<code>Phabricator</code>，本以为安装完成之后就可以愉快的使用了，但是没想到只是完成了一半，打算迁徙几个代码库进来试试，结果又踩了不少坑<a id="more"></a>，在安装部署完成的基础之上还需要配置不少东西才能真正的用起来，<code>Phabricator</code>看起来是很不错，但是作为一个工具，不得不说使用门槛还是偏高（可能是我太菜了[/捂脸]），最后终于用上了，简单总结分享一下吧</p>
<h2 id="Repository-Hosting"><a href="#Repository-Hosting" class="headerlink" title="Repository Hosting"></a>Repository Hosting</h2><p><code>Phabricator</code>支持Git、SVN以及Mercurial在SSH以及HTTP(Mercurial不支持HTTP)协议下进行代码托管，具体可以参见<a href="https://secure.phabricator.com/book/phabricator/article/diffusion_hosting/" target="_blank" rel="external">官方文档</a>，这里只介绍Git+SSH的方式，文档比较长，但是简化翻译后一共要进行如下几步操作：</p>
<h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><p>Phabricator需要设置三个账户：</p>
<ol>
<li><code>daemon-user</code>用于启动phd守护进程，这里我直接用了<code>root</code></li>
<li><code>www-user</code>作为WEB服务运行的用户，安装部署的时候已经默认了<code>apache</code>无需手动设置</li>
<li><code>vcs-user</code>Git操作相关的用户，这里我用了<code>git</code>  </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># 添加git用户</div><div class="line">useradd git</div><div class="line"></div><div class="line"># 修改shadow文件，将git用户的第二项该为NP，类似：git:NP:0:99999:7:::</div><div class="line">vim /etc/shadow</div><div class="line"># 修改passwd文件，将git用户的最后一项改为/usr/bin/bash</div><div class="line">vim /etc/passwd</div><div class="line"></div><div class="line">visudo</div><div class="line"># 在97行附近，加入如下内容：</div><div class="line">git  ALL=(ALL) SETENV: NOPASSWD: /bin/ls, /usr/bin/git, </div><div class="line">/usr/bin/git-upload-pack, /usr/bin/git-receive-pack, /usr/bin/ssh</div><div class="line"></div><div class="line"># 注释掉Defaults    requiretty</div></pre></td></tr></table></figure>
<p>修改配置，启动服务<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[phabricator]#  ./bin/config set phd.user root</div><div class="line">[phabricator]#  ./bin/phd start</div><div class="line">[phabricator]#  ./bin/config set diffusion.ssh-user git</div></pre></td></tr></table></figure></p>
<blockquote>
<p>注：<br>1.The second field (which is the password field) must not be set to !!. This value will prevent login. If it is set to !!, edit it and set it to NP (“no password”) instead<br>2.务必注释掉sudoer中的Defaults    requiretty  </p>
</blockquote>
<h3 id="配置SSHD"><a href="#配置SSHD" class="headerlink" title="配置SSHD"></a>配置SSHD</h3><p>为Phabricator单独配置一个sshd到2222端口上，当然你可以放到任意一个端口，如果你觉得很不爽，也可以阅读<a href="https://secure.phabricator.com/book/phabricator/article/diffusion_hosting/" target="_blank" rel="external">官方文档</a>进行一些特殊的设置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 设置端口号为2222</div><div class="line">./bin/config set diffusion.ssh-port 2222</div><div class="line"></div><div class="line"># 编辑脚本</div><div class="line">cd ~your/phabricator/path</div><div class="line">cp ./resources/sshd/phabricator-ssh-hook.sh /usr/libexec/phabricator-ssh-hook.sh</div><div class="line">chmod 0755 /usr/libexec/phabricator-ssh-hook.sh</div><div class="line">vim /usr/libexec/phabricator-ssh-hook.sh</div></pre></td></tr></table></figure></p>
<p>看起来大概这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line"></div><div class="line"># NOTE: Replace this with the username that you expect users to connect with.</div><div class="line">VCSUSER=&quot;git&quot;</div><div class="line"></div><div class="line"># NOTE: Replace this with the path to your Phabricator directory.</div><div class="line">ROOT=&quot;/var/www/html/phabricator&quot;</div><div class="line"></div><div class="line">if [ &quot;$1&quot; != &quot;$VCSUSER&quot; ];</div><div class="line">then</div><div class="line">  exit 1</div><div class="line">fi</div><div class="line"></div><div class="line">exec &quot;$ROOT/bin/ssh-auth&quot; $@</div></pre></td></tr></table></figure></p>
<p>创建编辑sshd配置文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim /etc/ssh/sshd_config.phabricator</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"># NOTE: You must have OpenSSHD 6.2 or newer; support for AuthorizedKeysCommand</div><div class="line"># was added in this version.</div><div class="line"></div><div class="line"># NOTE: Edit these to the correct values for your setup.</div><div class="line"></div><div class="line">AuthorizedKeysCommand /usr/libexec/phabricator-ssh-hook.sh</div><div class="line">AuthorizedKeysCommandUser git </div><div class="line">AllowUsers git </div><div class="line"></div><div class="line"># You may need to tweak these options, but mostly they just turn off everything</div><div class="line"># dangerous.</div><div class="line"></div><div class="line">Port 2222</div><div class="line">Protocol 2</div><div class="line">PermitRootLogin no</div><div class="line">AllowAgentForwarding no</div><div class="line">AllowTcpForwarding no</div><div class="line">PrintMotd no</div><div class="line">PrintLastLog no</div><div class="line">PasswordAuthentication yes </div><div class="line">AuthorizedKeysFile none</div><div class="line"></div><div class="line">PidFile /var/run/sshd-phabricator.pid</div></pre></td></tr></table></figure>
<p>执行<code>/usr/sbin/sshd -f /etc/ssh/sshd_config.phabricator</code>启动<code>sshd</code>  </p>
<blockquote>
<p>注：<br>Both the script(phabricator-ssh-hook.sh) itself and the parent directory the script resides in must be owned by root, and the script must have 755 permissions</p>
</blockquote>
<h2 id="Import-repository"><a href="#Import-repository" class="headerlink" title="Import repository"></a>Import repository</h2><p>完成上面的步骤之后，就可以自己新建仓库了，创建仓库很简单就不啰嗦了，这里讲一下如何导入一个现有的代码库到<code>Phabricator</code>中，步骤如下：</p>
<h3 id="添加Credentials"><a href="#添加Credentials" class="headerlink" title="添加Credentials"></a>添加Credentials</h3><p>进入<code>Application</code>-&gt;<code>Passphrase</code>-&gt;<code>Create Credential</code>,添加一个<code>SSH Private Key</code>将本机的SSH密钥对加入系统，同时将<code>Public Key</code>放到需要克隆的远程仓库中例如<code>GitHub</code>或者原来<code>Gerrit</code>所在的机器</p>
<h3 id="导入代码"><a href="#导入代码" class="headerlink" title="导入代码"></a>导入代码</h3><ol>
<li>进入<code>Diffusion</code>-&gt;<code>Create Repository</code>-&gt;<code>Create Git Repository</code>创建一个仓库</li>
<li>找到新建的仓库，点击<code>Manage Repository</code>-&gt;<code>URIs</code>-&gt;<code>Add New URI</code>，将远程仓库地址填写到<code>URI</code>中，设置<code>I/O Type</code>为<code>Observe</code>模式</li>
<li><code>Set Credentials</code>选中刚才添加的<code>Credentials</code></li>
<li>回到<code>Basics</code>中<code>Activate Repository</code>，此时可以在状态中看到正在导入，等待导入完成</li>
<li>在导入完成之后，编辑刚才<code>Observe</code>模式的那个URI，设置<code>I/O Type</code>为<code>No I/O</code>  </li>
</ol>
<blockquote>
<p>注：<br>官方文档中写的是Disable掉Observe的那个URI，实际上应该是设置<code>I/O Type</code>为<code>No I/O</code></p>
</blockquote>
<h2 id="Clone-amp-Commit"><a href="#Clone-amp-Commit" class="headerlink" title="Clone &amp; Commit"></a>Clone &amp; Commit</h2><p>进入<code>Settings</code>-&gt;<code>Personal Settings</code>-&gt;<code>Edit</code>-&gt;<code>SSH Public Keys</code>把平时开发用的机器的Public Key放进去，到这里，就可以用<code>git clone</code>指定的代码库了。不过还没完，你还得安装学习一下如何用<code>Arcanist</code>提交代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 下载到任何目录</div><div class="line">mdkir cd /usr/local/phabricator</div><div class="line">cd /usr/local/phabricator</div><div class="line">git clone https://github.com/phacility/libphutil.git</div><div class="line">git clone https://github.com/phacility/arcanist.git</div></pre></td></tr></table></figure></p>
<p>第一次使用的时候，会提示输入一个Token，直接根据提示从你的Phabricator URL中就能获取到，另外别忘了设置一下环境变量，vim /etc/profile.d/pha.sh<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export PATH=$PATH:/usr/local/phabricator/arcanist/bin</div></pre></td></tr></table></figure></p>
<p>顺便可以设置一下开机启动啥的这里就不写了，<code>Arcanist</code>我简单的使用了一下，大概有这些好处：</p>
<ul>
<li>让你的提交信息变得更规范</li>
<li>提交时就能设置好review相关的参数</li>
<li>直接用命令行就可以查看多个提交review的进度（这个很爽）</li>
<li>命令行直接合并代码</li>
</ul>
<p>简而言之就是更加快捷高效，命令并不难掌握，可以参考一下<a href="https://www.5288z.com/?p=1478" target="_blank" rel="external">这个链接</a>学习一下，如果用过git上手这个应该很快。  </p>
<p>最后，如果你只是自己玩玩或者在一个个人项目中使用<code>Phabricator</code>,别忘了设置<code>differential.allow-self-accept</code>为<code>true</code> ，下一篇我打算试试集成一个合适的CI系统进来，敬请期待~</p>
<hr>
<p>EOF</p>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/工具/" rel="tag">#工具</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/26/phabricator-configure/" rel="next" title="CentOS 7 Phabricator安装配置">
                <i class="fa fa-chevron-left"></i> CentOS 7 Phabricator安装配置
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  <p>热评文章</p>
  <div class="ds-top-threads" data-range="weekly" data-num-items="4"></div>


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/12/01/phabricator-2/"
           data-title="Phabricator仓库配置" data-url="http://zxh.site/2016/12/01/phabricator-2/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://o6sdpimwf.bkt.clouddn.com/uploads/2015/01/photoright-001.jpg"
               alt="张稀虹" />
          <p class="site-author-name" itemprop="name">张稀虹</p>
          <p class="site-description motion-element" itemprop="description">迎风向前是唯一的方法</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">36</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">26</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ansiz" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/u/2548716042" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/ANSIZ/" target="_blank" title="DouBan">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  DouBan
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/zhxh" target="_blank" title="ZhiHu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  ZhiHu
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Repository-Hosting"><span class="nav-number">1.</span> <span class="nav-text">Repository Hosting</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建用户"><span class="nav-number">1.1.</span> <span class="nav-text">创建用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置SSHD"><span class="nav-number">1.2.</span> <span class="nav-text">配置SSHD</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Import-repository"><span class="nav-number">2.</span> <span class="nav-text">Import repository</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加Credentials"><span class="nav-number">2.1.</span> <span class="nav-text">添加Credentials</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#导入代码"><span class="nav-number">2.2.</span> <span class="nav-text">导入代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Clone-amp-Commit"><span class="nav-number">3.</span> <span class="nav-text">Clone & Commit</span></a></li></ol></div>
            
          </div>
        </section>
      
    </div>


    
    <div class="player">
    <embed src="http://www.xiami.com/widget/8528997_1012996,1775755430,1025186,1771573819,1775828374,_235_346_000000_fffFFF_0/multiPlayer.swf" type="application/x-shockwave-flash" width="235" height="346" wmode="opaque"></embed>
    
    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">张稀虹</span>
</div>

<div class="powered-by">
  Thanks <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/jquery_lazyload/1.9.7/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ansiz"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
